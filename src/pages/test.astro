---
import '../styles/global.css';
import links from '../data/test-links.json';
const isExternal = (href: string = '') => /^https?:\/\//.test(href);
const iconPath = (name: string) => `/images/icons/${name}.svg`;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Classic Link Stack | Justin Napolitano</title>
    <meta name="theme-color" content="#0f7c66" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg?v=3" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=3" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=3" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=3" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="shortcut icon" href="/favicon.ico?v=3" />
  </head>
  <body>
    <main>
      <section class="hero hero--simple" aria-labelledby="test-hero">
        <div class="hero__copy">
          <h1 id="test-hero">{links.hero.title}</h1>
        </div>
      </section>

      <section class="legacy-stack" aria-label="Link tree">
        {links.links.map((link) => {
          const openInNewTab = link.newTab ?? isExternal(link.href);
          return (
            <a
              class="legacy-pill"
              href={link.href}
              target={openInNewTab ? '_blank' : undefined}
              rel={openInNewTab ? 'noopener' : undefined}
              style={`--legacy-color: ${link.brandColor ?? 'var(--accent)'}`}
            >
              <span class="legacy-pill__icon" style={`--icon-image: url('${iconPath(link.icon)}');`} aria-hidden="true" />
              <div class="legacy-pill__copy">
                <span class="legacy-pill__label">{link.label}</span>
                {link.meta && <span class="legacy-pill__meta">{link.meta}</span>}
              </div>
              <span class="legacy-pill__arrow" aria-hidden="true">â†—</span>
            </a>
          );
        })}
      </section>
    </main>
  </body>
</html>
